<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lam7a Studio | استديو التصميم الإبداعي</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script>
(function() {
emailjs.init({
publicKey: "jDE8nQ7KU9m4EJNo7",
blockHeadless: false,
});
})();
</script>

<style>
:root {
--primary: #8E44AD;
--secondary: #9B59B6;
--accent: #D7BDE2;
--dark: #2C3E50;
--light: #F3F2F7;
}

body {
background: linear-gradient(135deg, var(--accent), #fff);
font-family: 'Tajawal', sans-serif;
}

.navbar {
background: linear-gradient(45deg, var(--primary), var(--secondary)) !important;
padding: 15px 0;
box-shadow: 0 2px 15px rgba(0,0,0,0.1);
}

.hero-section {
background: linear-gradient(45deg, var(--primary), var(--secondary));
color: white;
padding: 120px 0;
text-align: center;
margin-bottom: 50px;
position: relative;
overflow: hidden;
}

.card {
border: none;
border-radius: 15px;
box-shadow: 0 10px 30px rgba(0,0,0,0.1);
transition: all 0.3s ease;
overflow: hidden;
margin-bottom: 30px;
}

.card:hover {
transform: translateY(-10px);
box-shadow: 0 15px 40px rgba(0,0,0,0.2);
}

.price-tag {
background: linear-gradient(45deg, var(--primary), var(--secondary));
color: white;
padding: 5px 15px;
border-radius: 20px;
font-weight: bold;
display: inline-block;
}

.btn-primary {
background: var(--primary);
border: none;
border-radius: 25px;
padding: 10px 25px;
transition: all 0.3s ease;
}

.btn-primary:hover {
background: var(--secondary);
transform: scale(1.05);
}

.modal-content {
border: none;
border-radius: 15px;
}

.modal-header {

background: linear-gradient(45deg, var(--primary), var(--secondary));
color: white;
border-radius: 15px 15px 0 0;
}

.form-control {
border-radius: 10px;
padding: 12px;
border: 2px solid var(--light);
}

.form-control:focus {
border-color: var(--primary);
box-shadow: none;
}

.user-profile {
display: flex;
align-items: center;
margin-right: 15px;
color: white;
}

.user-profile img {
width: 32px;
height: 32px;
border-radius: 50%;
margin-left: 8px;
border: 2px solid white;
}

.loading-spinner {
display: inline-block;
width: 20px;
height: 20px;
border: 3px solid rgba(255,255,255,.3);
border-radius: 50%;
border-top-color: #fff;
animation: spin 1s ease-in-out infinite;
margin-right: 10px;
}

@keyframes spin {
to { transform: rotate(360deg); }
}
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark sticky-top">
<div class="container">
<a class="navbar-brand" href="#">
<i class="fas fa-moon"></i> Lam7a Studio
</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav me-auto">
<li class="nav-item">
<a class="nav-link" href="#packages">الباقات</a>
</li>
</ul>
<div class="d-flex">
<div id="userProfile" class="user-profile" style="display: none;">
<img id="userAvatar" src="" alt="صورة المستخدم">
<span id="userName"></span>
</div>
<button id="loginBtn" onclick="loginWithDiscord()" class="btn btn-light me-2">
<i class="fab fa-discord"></i> تسجيل دخول
</button>
<button onclick="showOrderForm()" class="btn btn-light">
<i class="fas fa-shopping-cart"></i> اطلب الآن
</button>
</div>
</div>
</div>
</nav>

<section class="hero-section">
<div class="container">
<h1>Lam7a</h1>Studio</h1>
<p class="lead">تصاميم إبداعية تناسب جميع الأذواق</p>
<button class="btn btn-light btn-lg mt-3" onclick="showOrderForm()">
<i class="fas fa-shopping-cart"></i> اطلب الآن
</button>
</div>
</section>

<section id="packages" class="container mb-5">
<h2 class="text-center mb-4">باقاتنا</h2>
<div class="row">
<div class="col-md-4">
<div class="card">
<div class="card-body text-center">
<h3>باقة بيسك</h3>
<div class="price-tag mb-3">$1</div>
<ul class="list-unstyled">
<li>تصميم بسيط</li>
<li>تعديلين مجاناً</li>
<li>تسليم خلال 24 ساعة</li>
</ul>
<button class="btn btn-primary w-100" onclick="selectPackage('باقة بيسك - $1')">اختيار</button>
</div>
</div>
</div>

<div class="col-md-4">
<div class="card">
<div class="card-body text-center">
<h3>باقة برو</h3>
<div class="price-tag mb-3">$5</div>
<ul class="list-unstyled">
<li>تصميم احترافي</li>
<li>تعديلات غير محدودة</li>
<li>تسليم خلال 12 ساعة</li>
</ul>
<button class="btn btn-primary w-100" onclick="selectPackage('باقة برو - $5')">اختيار</button>
</div>
</div>
</div>

<div class="col-md-4">
<div class="card">
<div class="card-body text-center">
<h3>باقة بريميوم</h3>
<div class="price-tag mb-3">$10</div>
<ul class="list-unstyled">
<li>تصميم احترافي مميز</li>
<li>تعديلات غير محدودة</li>
<li>تسليم خلال 6 ساعات</li>
</ul>
<button class="btn btn-primary w-100" onclick="selectPackage('باقة بريميوم - $10')">اختيار</button>
</div>
</div>
</div>
</div>
</section>

<div class="modal fade" id="orderModal">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title">طلب تصميم جديد</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<form id="orderForm" onsubmit="submitOrder(event)">
<div class="mb-3">
<label class="form-label">الباقة المختارة</label>
<input type="text" id="selectedPackage" class="form-control" readonly>
</div>
<div class="mb-3">
<label class="form-label">الاسم الكامل</label>
<input type="text" name="name" class="form-control" required>
</div>
<div class="mb-3">
<label class="form-label">البريد الإلكتروني</label>
<input type="email" name="email" class="form-control" required>
</div>
<div class="mb-3">

<label class="form-label">معرف Discord</label>
<input type="text" name="discord" class="form-control" required>
</div>
<div class="mb-3">
<label class="form-label">تفاصيل الطلب</label>
<textarea name="details" class="form-control" rows="4" required></textarea>
</div>
<button type="submit" id="submitBtn" class="btn btn-primary w-100">
<i class="fas fa-paper-plane"></i> إرسال الطلب
</button>
</form>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
const DISCORD_CLIENT_ID = '1312489656796971098';
const REDIRECT_URI = 'https://moon-lith.github.io/Moonlight/callback';

function loginWithDiscord() {
const params = new URLSearchParams({
client_id: DISCORD_CLIENT_ID,
redirect_uri: REDIRECT_URI,
response_type: 'code',
scope: 'identify email'
});
window.location.href = `https://discord.com/oauth2/authorize?${params}`;
}

async function checkAuth() {
const token = localStorage.getItem('discord_token');
if (token) {
try {
const response = await fetch('https://discord.com/api/users/@me', {
headers: { Authorization: `Bearer ${token}` }
});
const userData = await response.json();
showUserProfile(userData);
} catch (error) {
console.error('Error fetching user data:', error);
localStorage.removeItem('discord_token');
}
}
}

function showUserProfile(userData) {
document.getElementById('userAvatar').src =
`https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}.png`;
document.getElementById('userName').textContent = userData.username;
document.getElementById('userProfile').style.display = 'flex';
document.getElementById('loginBtn').style.display = 'none';
}

function showOrderForm() {
const modal = new bootstrap.Modal(document.getElementById('orderModal'));
modal.show();
}

function selectPackage(packageName) {
document.getElementById('selectedPackage').value = packageName;
showOrderForm();
}

async function submitOrder(event) {
event.preventDefault();

const submitBtn = document.getElementById('submitBtn');
submitBtn.disabled = true;
submitBtn.innerHTML = '<span class="loading-spinner"></span> جاري الإرسال...';

try {
const templateParams = {
to_email: 'Lam7aStudio@gmail.com',
from_name: document.querySelector('input[name="name"]').value,
package: document.getElementById('selectedPackage').value,
customer_email: document.querySelector('input[name="email"]').value,
discord_id: document.querySelector('input[name="discord"]').value,
order_details: document.querySelector('textarea[name="details"]').value
};

const response = await emailjs.send(
'service_l82w2oc',
'template_12abcav',
templateParams,
'Ae_3xvqvwdvSJ4k22lbWc'
);

if (response.status === 200) {
Swal.fire({
icon: 'success',
title: 'تم إرسال طلبك بنجاح!',
text: 'سنتواصل معك قريباً عبر البريد الإلكتروني',
confirmButtonText: 'تم'
});
document.getElementById('orderForm').reset();
bootstrap.Modal.getInstance(document.getElementById('orderModal')).hide();
}
} catch (error) {
console.error('Error:', error);
Swal.fire({
icon: 'error',
title: 'خطأ!',
text: 'حدث خطأ في إرسال الطلب. الرجاء المحاولة مرة أخرى',
confirmButtonText: 'حسناً'
});
} finally {
submitBtn.disabled = false;
submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> إرسال الطلب';
}
}

window.onload = function() {
checkAuth();
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
if (code) {
localStorage.setItem('discord_token', code);
window.location.href = '/';
}
};
</script>

</body>
</html>
